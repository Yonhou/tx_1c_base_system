C51 COMPILER V7.06   DIGIT_SEG                                                             05/30/2020 12:19:30 PAGE 1   


C51 COMPILER V7.06, COMPILATION OF MODULE DIGIT_SEG
OBJECT MODULE PLACED IN digit_seg.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE src\digit_seg.c BROWSE DEBUG OBJECTEXTEND PRINT(.\digit_seg.lst) OBJECT(dig
                    -it_seg.obj)

stmt level    source

   1          #include <reg51.h>
   2          sbit dula=P2^6;//U1Ëø´æÆ÷Ëø´æ¶Ë
   3          sbit wela=P2^7;//U2Ëø´æÆ÷Ëø´æ¶Ë
   4          unsigned char code table[]={0x3f,0x06,0x5b,0x4f,0x66,0x6d,0x7d,0x07,0x7f,0x6f,0x77,0x7c,0x39,0x5e,0x79,0x7
             -1};
   5          typedef struct{
   6              unsigned char ucWe;
   7                  unsigned char ucValue;
   8          }stDigitSegSts;
   9          stDigitSegSts ucDigitSegStsVal[]={{0xFE,0x00},{0xFD,0x00},{0xFB,0x00},{0xF7,0x00},{0xEF,0x00},{0xDF,0x00}}
             -;//Ä¬ÈÏ¹Ø±ÕËùÓÐÊýÂë¹Ü
  10          
  11          void digital_segment_init(void)
  12          {
  13   1              wela=1;
  14   1              //P0=aa;
  15   1              P0=0xC0;
  16   1              wela=0;
  17   1      
  18   1              //dula=1;
  19   1              //P0=0x7F;
  20   1              //dula=0;
  21   1      }
  22          void digital_seg_cyclic(void)
  23          {
  24   1          static unsigned char index=0;
  25   1          //ÊýÂë¹Ü
  26   1              dula=1;
  27   1              P0=ucDigitSegStsVal[index].ucValue;
  28   1              dula=0;
  29   1          wela=1;
  30   1              P0=ucDigitSegStsVal[index].ucWe;
  31   1              wela=0;
  32   1      
  33   1              index++;
  34   1              if(index==(sizeof(ucDigitSegStsVal)/sizeof(stDigitSegSts)))
  35   1              {
  36   2                  index=0;
  37   2              }
  38   1      }
  39          void digital_seg_switch(unsigned char ucChannel,unsigned char unValue)
  40          {
  41   1          if((unValue<=sizeof(table))&&(ucChannel<(sizeof(ucDigitSegStsVal)/sizeof(stDigitSegSts))))
  42   1              {
  43   2                  ucDigitSegStsVal[ucChannel].ucValue = table[unValue];
  44   2              }
  45   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     74    ----
   CONSTANT SIZE    =     16    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
C51 COMPILER V7.06   DIGIT_SEG                                                             05/30/2020 12:19:30 PAGE 2   

   DATA SIZE        =     13    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
